<html xmlns="">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>维护部APP下载</title>
    <meta name="keywords" content="">
    <meta name="description" content="测试">
    <link rel="stylesheet" type="text/css" href="./css/app_files/app.css">
    <link rel="stylesheet" href="./css/app_files/main.css">
    <link rel="Shortcut Icon" href="">
 
  
</head>
<body class="appdownload-body">
<div class="mb-stars"></div>
<div class="page-bg-btm mobile"></div>
<div class="appdownload-wrap">
    <div class="appdownload-logo">
        <img src="https://raw.githubusercontent.com/anotherCPL/appDownloadTest/master/apps/maintainProject/maintainProject.png" width="120" height="120">
        <p class="appname">维护部APP，扫一扫下载</p>
    </div>
    <div class="appdownload-btns">
       <a class="btn item-android" onclick="toDownload_iOS();" style="text-align: center">
            <span class="txt" style="float: none"> <i class="iconfont">&#xe60e;</i> 苹果版</span>
        </a>
          <a class="btn item-android" onclick="toDownload_android();" style="text-align: center">
            <span class="txt" style="float: none"> <i class="iconfont">&#xe60f;</i> 安卓版</span>
        </a>
    </div>
    <p style="text-align: center;color: white; width: 60%;margin: 0 auto">点击下载应用</p>
</div>
</body>

<script>

 function toDownload_iOS(){
 
   var userAgent = navigator.userAgent; //取得浏览器的userAgent字符串
      
 if(confirm("是否下载安装安卓端app？")){  
           if (userAgent.indexOf("Safari") > -1) {
          
          window.location.href = 'itms-services://?action=download-manifest&url=https://raw.githubusercontent.com/anotherCPL/appDownloadTest/master/apps/maintainProject/install.plist';  //必须用https协议访问cpw.plist安装清单--->IOS签名的 ，可以搭建一个ftp服务器放在下面，也可以在本服务器上放置.plist文件

        } else{
     
             alert("请使用内置Safari浏览器打开页面，弹框允许安装后即可退出页面。");
        }
         }else{  
          
         } 

 }

 function toDownload_android(){

   if(confirm("是否下载安装安卓端app？")){  
          window.location.href = 'http://filecdn.nnjiapei.com/file/2019-11-06/4df9cdc9-c38a-4029-8551-f04ce36f3fb1.apk';
         }else{  
          
         } 
  
 }


 // 新的方法
    function toDownload(){
        console.log("ddd");
        console.log(IsPC());
        var u = navigator.userAgent;
        var ua = u.toLowerCase();
        if (/iphone|ipad|ipod/.test(ua)) {  // iOS 系统 ->  跳AppStore下载地址
            //alert("iOS");
           toDownload_iOS();
           alert("请使用内置Safari浏览器打开页面，弹框允许安装后即可退出页面。");
        } else if ( /android/.test(ua)) { // 安卓系统 -> 跳安卓端下载地址      
            // window.location.href = 'https://www.baidu.com';
            // alert("android");
            toDownload_android();

        } else if (IsPC()){ // PC端
            // window.location.href = 'https://www.baidu.com';
              toDownload_android();
         // if(confirm("还有继续吗？")){  
         //   alert("继续");  
         // }else{  
         //   alert("再见");  
         // } 

        }

      }
 
    function IsPC() {
        if ((navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i))) {
            return false;
        }else {
            return true;
        }
    }
 
</script>

</html>